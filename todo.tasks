TODO:
     ☐ Add tests, mainly to test dispatch. @critical